Search.setIndex({"docnames": ["config", "dev-usage", "docker", "index", "instrument", "new_benchmarks", "ref-pack", "reference", "usage"], "filenames": ["config.rst", "dev-usage.rst", "docker.rst", "index.rst", "instrument.rst", "new_benchmarks.rst", "ref-pack.rst", "reference.rst", "usage.rst"], "titles": ["Benchmark configuration", "Using milabench (DEVELOPERS)", "Docker", "Welcome to milabench\u2019s documentation!", "Instrumenting code", "Creating a new benchmark", "milabench.pack", "Reference", "Install and use"], "terms": {"The": [0, 1, 2, 4, 6, 8], "ha": [0, 4, 8], "two": [0, 4, 8], "section": [0, 4], "default": [0, 5, 6], "defin": [0, 1, 4, 5, 6], "templat": [0, 5], "each": [0, 1, 2, 8], "mai": [0, 1, 4, 5, 8], "includ": [0, 8], "special": [0, 4, 5], "direct": [0, 5], "note": 0, "oper": 0, "perform": [0, 2], "deep": 0, "merg": 0, "For": [0, 1, 4, 5], "exampl": [0, 3, 5], "plan": [0, 1], "method": [0, 4, 5, 6], "njob": 0, "n": 0, "2": 0, "test": [0, 2, 8], "3": [0, 8], "i": [0, 1, 4, 5, 6], "equival": [0, 6], "field": [0, 1], "let": [0, 4, 5], "": [0, 1, 4, 5, 6], "sai": [0, 5], "you": [0, 1, 2, 4, 5, 6, 8], "have": [0, 4, 5, 8], "follow": [0, 1, 4, 5, 8], "yaml": [0, 1, 2, 5, 8], "mnist": 0, "definit": [0, 1, 5, 6], "pytorch": [0, 4], "dir": [0, 5, 6, 7], "code": [0, 1, 3, 6, 8], "name": [0, 1, 4, 5], "venv": [0, 1, 5, 6], "data": [0, 1, 3, 5, 6, 8], "run": [0, 2, 3, 4, 5, 6, 7], "voir": [0, 1, 4, 5, 6, 7, 8], "stop": 0, "200": 0, "forward": [0, 1], "stdout": [0, 1, 6, 8], "stderr": [0, 1, 6], "loss": [0, 4], "compute_r": 0, "train_rat": 0, "loading_r": 0, "comput": [0, 4], "rate": [0, 1, 4], "true": [0, 4, 6], "train": [0, 1, 4, 5], "load": [0, 4], "argv": 0, "batch": [0, 4], "size": [0, 2, 4], "64": [0, 4], "point": [0, 4, 6], "directori": [0, 1, 4, 5, 6, 8], "more": [0, 4, 5, 8], "later": 0, "import": [0, 3, 4, 5, 6], "path": [0, 6, 8], "rel": [0, 1, 5, 6], "normal": 0, "thi": [0, 4, 5, 6, 8], "set": [0, 1, 4, 5, 6, 8], "technic": 0, "possibl": [0, 1], "overrid": 0, "everi": 0, "ar": [0, 1, 2, 4, 5, 6, 8], "milabench_bas": [0, 1, 5, 8], "argument": [0, 4, 5, 6], "base": [0, 1, 6, 8], "expand": 0, "describ": 0, "wai": 0, "task": [0, 1], "creat": [0, 1, 2, 3, 4], "nrun": 0, "just": [0, 4, 5], "launch": [0, 6], "fix": 0, "number": [0, 1], "parallel": [0, 1], "process": [0, 1, 5, 6], "given": [0, 4, 6], "command": [0, 1, 2, 4, 5, 6, 8], "when": [0, 4], "becaus": [0, 5], "what": [0, 1, 4, 5], "end": [0, 4], "up": 0, "final": [0, 4, 5], "json": [0, 2, 6, 8], "output": [0, 1, 4, 6], "save": [0, 1], "disk": [0, 5], "some": [0, 1, 5], "them": [0, 4, 5], "correspond": [0, 5, 6, 8], "other": [0, 1, 4, 5, 6], "flag": [0, 4, 5], "script": [0, 4, 6], "To": [1, 2, 4, 5, 8], "need": [1, 2, 4, 5, 8], "A": [1, 6], "configur": [1, 3, 5, 6, 8], "file": [1, 4, 5, 6, 8], "benchmark": [1, 2, 3, 4, 6], "virtual": [1, 5, 6, 8], "environ": [1, 5, 6, 8], "either": [1, 5, 8], "variabl": [1, 4, 5, 6, 8], "automat": 1, "construct": 1, "organ": 1, "depend": [1, 5], "bench1": 1, "etc": [1, 4, 6], "dataset": [1, 2, 4, 5, 8], "dataset1": 1, "calimero": 1, "2022": 1, "03": 1, "30_15": 1, "00": 1, "auto": 1, "gener": [1, 2, 4, 5], "0": [1, 4], "first": [1, 4, 5], "structur": [1, 5], "1": [1, 4], "second": [1, 4], "blah": [1, 6], "can": [1, 2, 4, 5, 6], "It": [1, 4, 5, 8], "chang": [1, 4, 5], "e": [1, 2, 6, 8], "g": [1, 6], "forc": [1, 5], "all": [1, 2, 4, 5, 8], "same": [1, 4, 6], "select": [1, 8], "comma": 1, "separ": 1, "list": [1, 5, 6], "order": [1, 4], "onli": [1, 5, 8], "exclud": [1, 8], "except": [1, 4, 8], "specif": [1, 4, 5], "current": [1, 4, 5, 6, 8], "env": [1, 2, 6], "activ": [1, 4, 8], "config": [1, 2, 5, 6, 7, 8], "standard": [1, 4, 8], "mybench": 1, "copi": [1, 5, 6], "specifi": [1, 6, 8], "itself": 1, "manifest": [1, 5, 6], "reus": 1, "pip": [1, 5, 6, 8], "extract": [1, 4, 5], "shallow": 1, "git": [1, 8], "clone": [1, 5, 8], "an": [1, 4, 5, 6, 8], "extern": [1, 6], "repositori": [1, 5], "contain": [1, 2, 4, 5, 8], "model": [1, 4], "dataset_nam": 1, "multipl": 1, "share": [1, 6], "so": [1, 4, 5, 6], "step": [1, 4, 5], "doe": [1, 5], "noth": 1, "certain": 1, "from": [1, 3, 4, 6], "instanc": [1, 4, 6], "one": [1, 4, 5], "might": 1, "gpu": [1, 8], "machin": [1, 2, 8], "appropri": [1, 5], "like": [1, 5], "voir_opt": [1, 4], "main": [1, 4, 6], "py": [1, 4, 5, 6], "script_opt": [1, 4], "both": [1, 4, 8], "group": 1, "determin": 1, "which": [1, 4, 5, 6, 8], "instrument": [1, 3, 5], "error": [1, 8], "dispatch": [1, 5], "run_nam": 1, "run_numb": 1, "print": [1, 4, 8], "out": [1, 4, 5, 8], "easi": [1, 4], "refer": [1, 3], "variant": 1, "cuda": [1, 3, 4, 8], "constraint": [1, 6], "cu118": 1, "txt": [1, 5, 6], "basic": [1, 4], "idea": 1, "behind": 1, "softwar": [1, 2], "version": [1, 6], "stabil": 1, "reproduc": 1, "abov": [1, 4], "requir": [1, 5, 6], "If": [1, 4, 5, 8], "valu": [1, 4, 6], "install_vari": 1, "install_valu": 1, "arch": [1, 2], "resolv": 1, "rocm": [1, 8], "architectur": 1, "todo": 1, "path_to_run": 1, "imag": 2, "releas": 2, "thei": [2, 4, 5], "come": [2, 5], "instal": [2, 3, 5, 6, 7], "necessari": [2, 4, 5], "No": 2, "addit": 2, "download": [2, 5, 8], "below": 2, "nvidia": [2, 8], "driver": 2, "ce": 2, "lastest": 2, "milabench": [2, 5, 7], "right": [2, 5], "awai": 2, "store": [2, 5], "result": [2, 4, 8], "insid": [2, 4], "folder": 2, "host": 2, "last": 2, "summari": 2, "pull": [2, 5], "we": 2, "go": 2, "sudo": 2, "ghcr": 2, "io": 2, "mila": [2, 8], "iqia": [2, 8], "nightli": 2, "rm": 2, "shm": 2, "256m": 2, "runtim": 2, "nvidia_visible_devic": 2, "v": 2, "pwd": 2, "show": 2, "report": [2, 3], "build": 2, "local": 2, "prototyp": 2, "t": [2, 4, 5], "arg": [2, 6], "ci": 2, "us": [3, 5, 6], "befor": [3, 4], "docker": 3, "develop": [3, 5], "option": [3, 4, 8], "prepar": [3, 6, 7, 8], "pin": [3, 6, 7], "compar": 3, "probe": [3, 5], "give": [3, 5], "metric": [3, 8], "new": [3, 4, 6, 8], "overview": 3, "scratch": 3, "adapt": 3, "exist": [3, 4], "pack": [3, 5, 7], "index": 3, "modul": [3, 4, 6], "search": 3, "page": 3, "prior": 4, "u": [4, 8], "see": [4, 5, 6], "how": [4, 8], "desir": 4, "suppos": 4, "simpl": 4, "torch": 4, "nn": 4, "torchvis": 4, "tvmodel": 4, "transform": 4, "def": [4, 5], "train_epoch": 4, "criterion": 4, "optim": 4, "loader": 4, "devic": 4, "inp": 4, "target": [4, 5], "zero_grad": 4, "backward": 4, "manual_se": 4, "1234": 4, "resnet18": 4, "crossentropyloss": 4, "sgd": 4, "paramet": [4, 6], "imagefold": 4, "some_data_fold": 4, "train_load": 4, "util": 4, "dataload": 4, "batch_siz": 4, "shuffl": 4, "epoch": 4, "rang": 4, "10": 4, "__name__": 4, "__main__": 4, "simpli": 4, "voirfil": [4, 5], "In": [4, 5, 6], "write": [4, 5], "calcul": 4, "instrument_prob": 4, "ov": 4, "yield": 4, "phase": 4, "load_script": 4, "displai": 4, "explan": 4, "function": 4, "start": [4, 6], "instrument_": 4, "take": [4, 5, 6], "overs": 4, "By": [4, 5, 6], "ask": 4, "resum": 4, "execut": [4, 5, 6, 7], "onc": [4, 5], "avail": 4, "init": 4, "pars": 4, "add": [4, 5], "argpars": 4, "parse_arg": 4, "line": 4, "been": 4, "access": [4, 6], "run_script": 4, "after": 4, "termin": 4, "reduct": 4, "ani": [4, 5, 8], "shorthand": 4, "mean": 4, "inform": [4, 5, 8], "about": [4, 8], "ptera": 4, "absolut": 4, "lead": 4, "where": 4, "variou": 4, "contribut": 4, "call": [4, 5, 6], "kei": 4, "minimum": 4, "instrument_display_min": 4, "min": 4, "f": 4, "dash": 4, "everyth": [4, 5], "well": [4, 5, 8], "anyth": [4, 5], "real": 4, "time": [4, 8], "few": [4, 5, 8], "enabl": 4, "turn": 4, "whether": 4, "verifi": [4, 5], "typic": 4, "don": 4, "do": [4, 5, 6], "much": [4, 5, 8], "provid": 4, "look": [4, 5], "type": 4, "those": 4, "allow": 4, "saniti": 4, "check": [4, 5, 6], "algorithm": 4, "someth": 4, "should": [4, 5, 6, 8], "tensor": 4, "element": 4, "its": 4, "shape": 4, "boolean": 4, "mere": 4, "indic": 4, "use_cuda": 4, "fals": [4, 6], "otherwis": [4, 6], "synchron": 4, "period": 4, "get": [4, 8], "accur": 4, "These": 4, "veri": 4, "strictli": 4, "speak": 4, "alwai": 4, "alreadi": [4, 5, 6], "made": 4, "opt": 4, "instrument_argpars": 4, "sinc": 4, "suffici": 4, "object": [4, 6], "being": [4, 5], "iter": 4, "dure": [4, 5], "attempt": 4, "although": 4, "work": [4, 5, 6], "compute_start": 4, "compute_end": 4, "bit": 4, "trickier": 4, "wrapper": 4, "featur": 4, "spent": 4, "between": 4, "begin": 4, "loop": [4, 5], "would": 4, "marker": 4, "endloop_x": 4, "denot": 4, "x": 4, "loop_x": 4, "tag": 4, "endloop_inp": 4, "trigger": 4, "anoth": 4, "loop_inp": 4, "instead": 4, "somepackag": 4, "syntax": 4, "tricki": 4, "want": [4, 5], "also": [4, 8], "directli": [4, 5], "without": [4, 5], "slash": 4, "refstr": 4, "string": 4, "assum": 5, "ornatebench": 5, "make": 5, "_templat": 5, "cp": 5, "readm": 5, "md": 5, "document": 5, "here": [5, 8], "dev": 5, "bench": 5, "python": [5, 6, 7], "extra": [5, 6], "unnecessari": 5, "leav": 5, "alon": 5, "thing": 5, "sync": 5, "your": [5, 8], "under": 5, "job": 5, "_dev_": 5, "benchdir": 5, "necessarili": 5, "_dev_ornatebench": 5, "prep": 5, "actual": 5, "suitabl": 5, "isol": 5, "moreov": 5, "reason": 5, "cours": 5, "layer": 5, "over": [5, 6], "github": [5, 8], "place": 5, "seen": 5, "lot": 5, "than": 5, "why": 5, "care": [5, 6], "locat": 5, "re": 5, "rest": 5, "librari": 5, "put": [5, 8], "unlik": 5, "fancier": 5, "arbitrari": 5, "rememb": 5, "root": 5, "milabench_dir_data": [5, 6], "subdirectori": 5, "repeat": [5, 8], "progress": 5, "now": 5, "repo": [5, 8], "http": 5, "com": [5, 8], "snakeoilplz": 5, "agi": 5, "remov": 5, "won": 5, "packag": [5, 6, 7], "branch": 5, "master": 5, "class": [5, 6], "thebenchmark": 5, "main_script": [5, 6], "prepare_script": [5, 6], "self": [5, 6], "clone_subtre": 5, "pip_instal": [5, 6, 7], "r": [5, 6], "__pack__": 5, "_dev_agi": 5, "project": 5, "checkout": 5, "cd": [5, 8], "doesn": 5, "try": 5, "sure": 5, "through": 5, "shouldn": 5, "But": 5, "modifi": 5, "accordingli": 5, "transfer": 5, "again": 5, "until": 5, "good": [5, 6], "matter": 5, "make_env": [5, 6, 7], "inherit": 6, "must": [6, 8], "three": [6, 8], "behavior": 6, "basepackag": [6, 7], "core": 6, "none": 6, "dictionari": 6, "pack_path": [6, 7], "namespac": 6, "async": 6, "checked_instal": [6, 7], "entri": 6, "conda_instal": [6, 7], "kwarg": 6, "conda": 6, "cwd": 6, "unless": 6, "return": 6, "dict": 6, "verbatim": 6, "filenam": 6, "voirarg": 6, "pipe": 6, "program": 6, "subprocess": 6, "popen": 6, "repres": 6, "attribut": 6, "requirements_fil": 6, "That": 6, "understood": 6, "word": 6, "occur": 6, "content": 6, "milabench_dir_cod": 6, "milabench_dir_venv": 6, "milabench_dir_run": 6, "milabench_config": [6, 8], "dump": 6, "clear_previ": 6, "bool": 6, "pip_compile_arg": 6, "sequenc": 6, "input_fil": 6, "python3": 6, "m": 6, "piptool": 6, "compil": 6, "input": 6, "bash": 6, "invoc": 6, "upgrad": 8, "edit": 8, "mode": 8, "platform": 8, "amd": 8, "individu": 8, "milabench_gpu_arch": 8, "whole": 8, "resnet50": 8, "squeezenet1_1": 8, "efficientnet_b0": 8, "efficientnet_b4": 8, "efficientnet_b7": 8, "convnext_larg": 8, "regnet_y_128gf": 8, "bert": 8, "hf_reform": 8, "hf_t5": 8, "dlrm": 8, "soft_actor_crit": 8, "speech_transform": 8, "super_slomo": 8, "stargan": 8, "learning_to_paint": 8, "ppo": 8, "td3": 8, "resnet152": 8, "vit_l_32": 8, "suit": 8, "row": 8, "ran": 8, "were": 8, "failur": 8, "produc": 8, "html": 8, "detail": 8, "some_specific_run": 8, "overal": 8, "score": 8, "weight": 8, "weigh": 8, "purpos": 8}, "objects": {"milabench": [[6, 0, 0, "-", "pack"]], "milabench.pack": [[6, 1, 1, "", "BasePackage"], [6, 1, 1, "", "Package"]], "milabench.pack.BasePackage": [[6, 2, 1, "", "checked_install"], [6, 2, 1, "", "conda_install"], [6, 3, 1, "", "config"], [6, 3, 1, "", "dirs"], [6, 2, 1, "", "execute"], [6, 2, 1, "", "make_env"], [6, 3, 1, "", "pack_path"], [6, 2, 1, "", "pip_install"], [6, 2, 1, "", "python"], [6, 2, 1, "", "voir"]], "milabench.pack.Package": [[6, 2, 1, "", "install"], [6, 2, 1, "", "make_env"], [6, 2, 1, "", "pin"], [6, 2, 1, "", "prepare"], [6, 2, 1, "", "run"]]}, "objtypes": {"0": "py:module", "1": "py:class", "2": "py:method", "3": "py:attribute"}, "objnames": {"0": ["py", "module", "Python module"], "1": ["py", "class", "Python class"], "2": ["py", "method", "Python method"], "3": ["py", "attribute", "Python attribute"]}, "titleterms": {"benchmark": [0, 5, 8], "configur": 0, "us": [1, 4, 8], "milabench": [1, 3, 4, 6, 8], "develop": 1, "import": 1, "option": 1, "instal": [1, 8], "prepar": [1, 5], "run": [1, 8], "pin": 1, "report": [1, 8], "compar": 1, "docker": 2, "cuda": 2, "requir": 2, "usag": 2, "publish": 2, "welcom": 3, "": 3, "document": 3, "content": 3, "indic": 3, "tabl": 3, "instrument": 4, "code": [4, 5], "probe": 4, "exampl": 4, "give": 4, "data": 4, "metric": 4, "essenti": 4, "addit": 4, "read": 4, "creat": 5, "new": 5, "overview": 5, "The": 5, "benchfil": 5, "main": 5, "script": 5, "from": 5, "scratch": 5, "adapt": 5, "exist": 5, "pack": 6, "refer": 7, "befor": 8}, "envversion": {"sphinx.domains.c": 2, "sphinx.domains.changeset": 1, "sphinx.domains.citation": 1, "sphinx.domains.cpp": 8, "sphinx.domains.index": 1, "sphinx.domains.javascript": 2, "sphinx.domains.math": 2, "sphinx.domains.python": 3, "sphinx.domains.rst": 2, "sphinx.domains.std": 2, "sphinx": 57}, "alltitles": {"Benchmark configuration": [[0, "benchmark-configuration"]], "Using milabench (DEVELOPERS)": [[1, "using-milabench-developers"]], "Important options": [[1, "important-options"]], "milabench install": [[1, "milabench-install"]], "milabench prepare": [[1, "milabench-prepare"]], "milabench run": [[1, "milabench-run"]], "milabench pin": [[1, "milabench-pin"]], "milabench report": [[1, "milabench-report"]], "milabench compare": [[1, "milabench-compare"]], "Docker": [[2, "docker"]], "CUDA": [[2, "cuda"]], "Requirements": [[2, "requirements"]], "Usage": [[2, "usage"]], "Publish": [[2, "publish"]], "Welcome to milabench\u2019s documentation!": [[3, "welcome-to-milabench-s-documentation"]], "Contents:": [[3, null]], "Indices and tables": [[3, "indices-and-tables"]], "Instrumenting code": [[4, "instrumenting-code"]], "Probe example": [[4, "probe-example"]], "Giving and using data and metrics": [[4, "giving-and-using-data-and-metrics"]], "Probing for milabench": [[4, "probing-for-milabench"]], "Essential probes": [[4, "essential-probes"]], "Additional readings": [[4, "additional-readings"]], "Example": [[4, "example"]], "Creating a new benchmark": [[5, "creating-a-new-benchmark"]], "Overview": [[5, "overview"]], "The benchfile": [[5, "the-benchfile"]], "Prepare/main scripts": [[5, "prepare-main-scripts"]], "Benchmark from scratch": [[5, "benchmark-from-scratch"]], "Adapting existing code": [[5, "adapting-existing-code"]], "milabench.pack": [[6, "module-milabench.pack"]], "Reference": [[7, "reference"]], "Install and use": [[8, "install-and-use"]], "Before running the benchmarks": [[8, "before-running-the-benchmarks"]], "Run milabench": [[8, "run-milabench"]], "Reports": [[8, "reports"]]}, "indexentries": {"basepackage (class in milabench.pack)": [[6, "milabench.pack.BasePackage"]], "package (class in milabench.pack)": [[6, "milabench.pack.Package"]], "checked_install() (milabench.pack.basepackage method)": [[6, "milabench.pack.BasePackage.checked_install"]], "conda_install() (milabench.pack.basepackage method)": [[6, "milabench.pack.BasePackage.conda_install"]], "config (milabench.pack.basepackage attribute)": [[6, "milabench.pack.BasePackage.config"]], "dirs (milabench.pack.basepackage attribute)": [[6, "milabench.pack.BasePackage.dirs"]], "execute() (milabench.pack.basepackage method)": [[6, "milabench.pack.BasePackage.execute"]], "install() (milabench.pack.package method)": [[6, "milabench.pack.Package.install"]], "make_env() (milabench.pack.basepackage method)": [[6, "milabench.pack.BasePackage.make_env"]], "make_env() (milabench.pack.package method)": [[6, "milabench.pack.Package.make_env"]], "milabench.pack": [[6, "module-milabench.pack"]], "module": [[6, "module-milabench.pack"]], "pack_path (milabench.pack.basepackage attribute)": [[6, "milabench.pack.BasePackage.pack_path"]], "pin() (milabench.pack.package method)": [[6, "milabench.pack.Package.pin"]], "pip_install() (milabench.pack.basepackage method)": [[6, "milabench.pack.BasePackage.pip_install"]], "prepare() (milabench.pack.package method)": [[6, "milabench.pack.Package.prepare"]], "python() (milabench.pack.basepackage method)": [[6, "milabench.pack.BasePackage.python"]], "run() (milabench.pack.package method)": [[6, "milabench.pack.Package.run"]], "voir() (milabench.pack.basepackage method)": [[6, "milabench.pack.BasePackage.voir"]]}})