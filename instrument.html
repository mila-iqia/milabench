<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="./">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Instrumenting code &mdash; milabench  documentation</title>
      <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=80d5e7a1" />
      <link rel="stylesheet" type="text/css" href="_static/css/theme.css?v=19f00094" />

  
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="_static/jquery.js?v=5d32c60e"></script>
        <script src="_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
        <script src="_static/documentation_options.js?v=5929fcd5"></script>
        <script src="_static/doctools.js?v=888ff710"></script>
        <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="index.html" class="icon icon-home">
            milabench
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="usage.html">Install and use</a></li>
<li class="toctree-l1"><a class="reference internal" href="docker.html">Docker</a></li>
<li class="toctree-l1"><a class="reference internal" href="dev-usage.html">Using milabench (DEVELOPERS)</a></li>
<li class="toctree-l1"><a class="reference internal" href="new_benchmarks.html">Creating a new benchmark</a></li>
<li class="toctree-l1"><a class="reference internal" href="reference.html">Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="sizer.html">Scaling</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">milabench</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">Instrumenting code</li>
      <li class="wy-breadcrumbs-aside">
            <a href="_sources/instrument.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Outdated information, do not put in toctree.</p>
</div>
<section id="instrumenting-code">
<h1>Instrumenting code<a class="headerlink" href="#instrumenting-code" title="Link to this heading"></a></h1>
<p>Prior to creating a new benchmark, let us see how to instrument existing code in order to extract the desired metrics.</p>
<p>Suppose you have this simple script in <code class="docutils literal notranslate"><span class="pre">main.py</span></code>:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">torch</span>
<span class="kn">import</span> <span class="nn">torch.nn</span> <span class="k">as</span> <span class="nn">nn</span>
<span class="kn">import</span> <span class="nn">torchvision.datasets</span> <span class="k">as</span> <span class="nn">datasets</span>
<span class="kn">import</span> <span class="nn">torchvision.models</span> <span class="k">as</span> <span class="nn">tvmodels</span>
<span class="kn">import</span> <span class="nn">torchvision.transforms</span> <span class="k">as</span> <span class="nn">transforms</span>

<span class="k">def</span> <span class="nf">train_epoch</span><span class="p">(</span><span class="n">model</span><span class="p">,</span> <span class="n">criterion</span><span class="p">,</span> <span class="n">optimizer</span><span class="p">,</span> <span class="n">loader</span><span class="p">,</span> <span class="n">device</span><span class="p">):</span>
    <span class="k">for</span> <span class="n">inp</span><span class="p">,</span> <span class="n">target</span> <span class="ow">in</span> <span class="n">loader</span><span class="p">:</span>
        <span class="n">inp</span> <span class="o">=</span> <span class="n">inp</span><span class="o">.</span><span class="n">to</span><span class="p">(</span><span class="n">device</span><span class="p">)</span>
        <span class="n">target</span> <span class="o">=</span> <span class="n">target</span><span class="o">.</span><span class="n">to</span><span class="p">(</span><span class="n">device</span><span class="p">)</span>
        <span class="n">output</span> <span class="o">=</span> <span class="n">model</span><span class="p">(</span><span class="n">inp</span><span class="p">)</span>
        <span class="n">loss</span> <span class="o">=</span> <span class="n">criterion</span><span class="p">(</span><span class="n">output</span><span class="p">,</span> <span class="n">target</span><span class="p">)</span>
        <span class="n">optimizer</span><span class="o">.</span><span class="n">zero_grad</span><span class="p">()</span>
        <span class="n">loss</span><span class="o">.</span><span class="n">backward</span><span class="p">()</span>
        <span class="n">optimizer</span><span class="o">.</span><span class="n">step</span><span class="p">()</span>

<span class="k">def</span> <span class="nf">main</span><span class="p">():</span>
    <span class="n">torch</span><span class="o">.</span><span class="n">cuda</span><span class="o">.</span><span class="n">manual_seed</span><span class="p">(</span><span class="mi">1234</span><span class="p">)</span>
    <span class="n">device</span> <span class="o">=</span> <span class="n">torch</span><span class="o">.</span><span class="n">device</span><span class="p">(</span><span class="s2">&quot;cuda&quot;</span><span class="p">)</span>

    <span class="n">model</span> <span class="o">=</span> <span class="n">tvmodels</span><span class="o">.</span><span class="n">resnet18</span><span class="p">()</span>
    <span class="n">model</span><span class="o">.</span><span class="n">to</span><span class="p">(</span><span class="n">device</span><span class="p">)</span>

    <span class="n">criterion</span> <span class="o">=</span> <span class="n">nn</span><span class="o">.</span><span class="n">CrossEntropyLoss</span><span class="p">()</span><span class="o">.</span><span class="n">to</span><span class="p">(</span><span class="n">device</span><span class="p">)</span>
    <span class="n">optimizer</span> <span class="o">=</span> <span class="n">torch</span><span class="o">.</span><span class="n">optim</span><span class="o">.</span><span class="n">SGD</span><span class="p">(</span><span class="n">model</span><span class="o">.</span><span class="n">parameters</span><span class="p">(),</span> <span class="mf">0.1</span><span class="p">)</span>
    <span class="n">train</span> <span class="o">=</span> <span class="n">datasets</span><span class="o">.</span><span class="n">ImageFolder</span><span class="p">(</span><span class="s2">&quot;some_data_folder&quot;</span><span class="p">)</span>
    <span class="n">train_loader</span> <span class="o">=</span> <span class="n">torch</span><span class="o">.</span><span class="n">utils</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">DataLoader</span><span class="p">(</span><span class="n">train</span><span class="p">,</span> <span class="n">batch_size</span><span class="o">=</span><span class="mi">64</span><span class="p">,</span> <span class="n">shuffle</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

    <span class="k">for</span> <span class="n">epoch</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">10</span><span class="p">):</span>
        <span class="n">train_epoch</span><span class="p">(</span><span class="n">model</span><span class="p">,</span> <span class="n">criterion</span><span class="p">,</span> <span class="n">optimizer</span><span class="p">,</span> <span class="n">train_loader</span><span class="p">,</span> <span class="n">device</span><span class="p">)</span>

<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s2">&quot;__main__&quot;</span><span class="p">:</span>
    <span class="n">main</span><span class="p">()</span>
</pre></div>
</div>
<section id="probe-example">
<h2>Probe example<a class="headerlink" href="#probe-example" title="Link to this heading"></a></h2>
<p>To instrument this code, simply create a file named <code class="docutils literal notranslate"><span class="pre">voirfile.py</span></code> in the current directory. In that file, you can write <em>instruments</em> which will be activated by running <code class="docutils literal notranslate"><span class="pre">voir</span> <span class="pre">&lt;VOIR_OPTIONS&gt;</span> <span class="pre">main.py</span> <span class="pre">&lt;SCRIPT_OPTIONS&gt;</span></code>. For example, this instrument will print out the losses as they are calculated:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">instrument_probes</span><span class="p">(</span><span class="n">ov</span><span class="p">):</span>
    <span class="k">yield</span> <span class="n">ov</span><span class="o">.</span><span class="n">phases</span><span class="o">.</span><span class="n">load_script</span>
    <span class="n">ov</span><span class="o">.</span><span class="n">probe</span><span class="p">(</span><span class="s2">&quot;//train_epoch &gt; loss&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">display</span><span class="p">()</span>
</pre></div>
</div>
<p><strong>Explanation:</strong></p>
<ul class="simple">
<li><p>An instrument is a function or generator defined in <code class="docutils literal notranslate"><span class="pre">voirfile.py</span></code> with a name that starts with <code class="docutils literal notranslate"><span class="pre">instrument_</span></code>.</p></li>
<li><p>It takes one parameter, an <code class="docutils literal notranslate"><span class="pre">Overseer</span></code>.</p></li>
<li><p>By yielding <code class="docutils literal notranslate"><span class="pre">ov.phases.load_script</span></code>, the instrument asks the overseer to resume the instrument’s execution once the script is loaded, but before it is executed.</p>
<ul>
<li><p>The following phases are available:</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">ov.phases.init</span></code>: When the overseer is created, but before the arguments are parsed. You can add new options to <code class="docutils literal notranslate"><span class="pre">voir</span></code> in <code class="docutils literal notranslate"><span class="pre">ov.argparser</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">ov.phases.parse_args</span></code>: voir’s command line arguments have been parsed and are accessible in <code class="docutils literal notranslate"><span class="pre">ov.options</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">ov.phases.load_script</span></code>: The script has been loaded.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">ov.phases.run_script</span></code>: The script has been executed.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">ov.phases.finalize</span></code>: After <code class="docutils literal notranslate"><span class="pre">ov.given</span></code> has been terminated (so reductions etc have been run).</p></li>
</ul>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">ov.probe</span></code> sets a probe in the script’s code (and/or in any module’s code)</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">//train_epoch</span> <span class="pre">&gt;</span> <span class="pre">loss</span></code> is shorthand for <code class="docutils literal notranslate"><span class="pre">/__main__/train_epoch</span> <span class="pre">&gt;</span> <span class="pre">loss</span></code> and it means: “instrument the loss variable inside the train_epoch function that’s in the module with <code class="docutils literal notranslate"><span class="pre">__name__</span> <span class="pre">==</span> <span class="pre">&quot;__main__&quot;</span></code>.</p></li>
<li><p>For more information about probing, see <a class="reference external" href="https://ptera.readthedocs.io/en/latest/guide.html">ptera</a>.</p></li>
<li><p>For more information about “absolute” probes (with a leading <code class="docutils literal notranslate"><span class="pre">/</span></code>), see <a class="reference external" href="https://ptera.readthedocs.io/en/latest/guide.html#absolute-references">this section</a>.</p></li>
</ul>
</li>
</ul>
</section>
<section id="giving-and-using-data-and-metrics">
<h2>Giving and using data and metrics<a class="headerlink" href="#giving-and-using-data-and-metrics" title="Link to this heading"></a></h2>
<p><code class="docutils literal notranslate"><span class="pre">ov.given</span></code> is an instance of <a class="reference external" href="https://giving.readthedocs.io/en/latest/ref-gvn.html#giving.gvn.Given">Given</a> and is where various instruments contribute data and read data from other instruments.</p>
<p><strong>Contributing data</strong></p>
<ul class="simple">
<li><p>Calling <code class="docutils literal notranslate"><span class="pre">ov.give(key=value,</span> <span class="pre">...)</span></code> in an instrument.</p></li>
<li><p>Calling <code class="docutils literal notranslate"><span class="pre">ov.probe(...).give()</span></code> in an instrument.</p></li>
<li><p>Calling <code class="docutils literal notranslate"><span class="pre">from</span> <span class="pre">giving</span> <span class="pre">import</span> <span class="pre">give;</span> <span class="pre">give(key=value,</span> <span class="pre">...)</span></code> in a script.</p></li>
</ul>
<p><strong>Using data</strong></p>
<ul class="simple">
<li><p>Using <code class="docutils literal notranslate"><span class="pre">ov.given</span></code>’s various methods.</p></li>
</ul>
<p><strong>Example</strong></p>
<p>This example probes the loss using one instrument and then displays the minimum loss using a second instrument.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">instrument_probes</span><span class="p">(</span><span class="n">ov</span><span class="p">):</span>
    <span class="k">yield</span> <span class="n">ov</span><span class="o">.</span><span class="n">phases</span><span class="o">.</span><span class="n">load_script</span>
    <span class="n">ov</span><span class="o">.</span><span class="n">probe</span><span class="p">(</span><span class="s2">&quot;//train_epoch &gt; loss&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">give</span><span class="p">()</span>

<span class="k">def</span> <span class="nf">instrument_display_min</span><span class="p">(</span><span class="n">ov</span><span class="p">):</span>
    <span class="k">yield</span> <span class="n">ov</span><span class="o">.</span><span class="n">phases</span><span class="o">.</span><span class="n">init</span>
    <span class="n">ov</span><span class="o">.</span><span class="n">given</span><span class="p">[</span><span class="s2">&quot;?loss&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">min</span><span class="p">()</span><span class="o">.</span><span class="n">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Minimum loss: </span><span class="si">{}</span><span class="s2">&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>You can run the instruments with <code class="docutils literal notranslate"><span class="pre">voir</span> <span class="pre">main.py</span></code>. In addition to that, <code class="docutils literal notranslate"><span class="pre">voir</span> <span class="pre">--dash</span> <span class="pre">main.py</span></code> will display everything that is given, so you will see the values of <code class="docutils literal notranslate"><span class="pre">loss</span></code> (as well as anything you give) change in real time.</p>
</section>
<section id="probing-for-milabench">
<span id="probingmb"></span><h2>Probing for milabench<a class="headerlink" href="#probing-for-milabench" title="Link to this heading"></a></h2>
<p>Milabench adds a few instruments to <code class="docutils literal notranslate"><span class="pre">voir</span></code> that can be enabled using flags, such as <code class="docutils literal notranslate"><span class="pre">--train-rate</span></code>. To turn them all on and see whether you are instrumenting what needs to be instrumented for a benchmark, run:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">voir</span> <span class="o">--</span><span class="n">verify</span> <span class="n">main</span><span class="o">.</span><span class="n">py</span>
</pre></div>
</div>
<p>You typically don’t need to do much except write a few probes. The various instruments provided by <code class="docutils literal notranslate"><span class="pre">milabench</span></code> will look for data with specific names and types.</p>
<section id="essential-probes">
<h3>Essential probes<a class="headerlink" href="#essential-probes" title="Link to this heading"></a></h3>
<p>The <strong>essential</strong> probes to provide are those that allow the computation of the training rate.</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">loss</span></code>: The current training loss. This is used as a sanity check, to verify that the algorithm is doing something.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">step</span> <span class="pre">+</span> <span class="pre">batch</span></code>: Both should be probed/given at the same time.</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">batch</span></code> should be a tensor such that the first element of its shape is the batch size.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">step</span></code> can be anything, typically just the boolean <code class="docutils literal notranslate"><span class="pre">True</span></code>. It merely indicates that this is the end of a training step.</p></li>
</ul>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">use_cuda</span></code>: True if using cuda for training, False otherwise. If using CUDA, cuda.synchronize will be periodically called to get more accurate readings.</p></li>
</ul>
</section>
<section id="additional-readings">
<h3>Additional readings<a class="headerlink" href="#additional-readings" title="Link to this heading"></a></h3>
<p>These readings can be very useful, but they are not strictly speaking necessary and may not always be available or easy to extract.</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">options</span></code>: The parsed command line options. If the script is using the standard argparse module, you can import the already-made instrumenter in the voirfile: <code class="docutils literal notranslate"><span class="pre">from</span> <span class="pre">milabench.opt</span> <span class="pre">import</span> <span class="pre">instrument_argparse</span></code>. Since the name starts with <code class="docutils literal notranslate"><span class="pre">instrument_</span></code>, it is sufficient to import it to activate it.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">model</span></code>: The model object (PyTorch/etc.) that contains the parameters.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">loader</span></code>: The DataLoader that is being iterated on during training. The <code class="docutils literal notranslate"><span class="pre">--loading-rate</span></code> flag will attempt to instrument it, although that may not always work.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">batch</span> <span class="pre">+</span> <span class="pre">compute_start</span> <span class="pre">+</span> <span class="pre">compute_end</span></code>: This one is a bit trickier and uses <a class="reference external" href="https://ptera.readthedocs.io/en/latest/guide.html#wrapper-probe">the wrapper probe feature</a> in ptera. The <code class="docutils literal notranslate"><span class="pre">--compute-rate</span></code> flag uses this to calculate the time spent between the beginning and end of a loop iteration.</p></li>
</ul>
</section>
<section id="example">
<h3>Example<a class="headerlink" href="#example" title="Link to this heading"></a></h3>
<p>This is how you would provide this information for the example <code class="docutils literal notranslate"><span class="pre">main.py</span></code> above:</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The special marker <code class="docutils literal notranslate"><span class="pre">#endloop_X</span></code> can be used in a probe to denote the end of a for loop that has iteration variable <code class="docutils literal notranslate"><span class="pre">X</span></code>. <code class="docutils literal notranslate"><span class="pre">#loop_X</span></code> can be used to tag the beginning.</p>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Instrument argparse</span>
<span class="kn">from</span> <span class="nn">milabench.opt</span> <span class="kn">import</span> <span class="n">instrument_argparse</span>

<span class="k">def</span> <span class="nf">instrument_probes</span><span class="p">(</span><span class="n">ov</span><span class="p">):</span>
    <span class="k">yield</span> <span class="n">ov</span><span class="o">.</span><span class="n">phases</span><span class="o">.</span><span class="n">load_script</span>

    <span class="c1"># Give the loss</span>
    <span class="n">ov</span><span class="o">.</span><span class="n">probe</span><span class="p">(</span><span class="s2">&quot;//train_epoch &gt; loss&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">give</span><span class="p">()</span>

    <span class="c1"># Give batch + step</span>
    <span class="n">ov</span><span class="o">.</span><span class="n">probe</span><span class="p">(</span><span class="s2">&quot;//train_epoch(inp as batch) &gt; #endloop_inp as step&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">give</span><span class="p">()</span>

    <span class="c1"># Always use CUDA</span>
    <span class="n">ov</span><span class="o">.</span><span class="n">give</span><span class="p">(</span><span class="n">use_cuda</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

    <span class="c1"># Give the model</span>
    <span class="n">ov</span><span class="o">.</span><span class="n">probe</span><span class="p">(</span><span class="s2">&quot;//main &gt; model&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">give</span><span class="p">()</span>

    <span class="c1"># Give the loader</span>
    <span class="n">ov</span><span class="o">.</span><span class="n">probe</span><span class="p">(</span><span class="s2">&quot;//main &gt; train_loader as loader&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">give</span><span class="p">()</span>

    <span class="c1"># Compute start/end</span>
    <span class="c1"># This basically creates a probe that has two trigger points, one</span>
    <span class="c1"># for ! and another for !!.</span>
    <span class="n">ov</span><span class="o">.</span><span class="n">probe</span><span class="p">(</span><span class="s2">&quot;//train_epoch(inp as batch, !#loop_inp as compute_start, !!#endloop_inp as compute_end)&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">give</span><span class="p">()</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>If, instead of being in the main script at <code class="docutils literal notranslate"><span class="pre">main.py</span></code>, the <code class="docutils literal notranslate"><span class="pre">train_epoch</span></code> function is in <code class="docutils literal notranslate"><span class="pre">somepackage/train.py</span></code>, you can simply use <code class="docutils literal notranslate"><span class="pre">/somepackage.train/train_epoch</span></code> instead of <code class="docutils literal notranslate"><span class="pre">//train_epoch</span></code>.</p>
<p>The syntax can be a bit tricky, so if you want you can also import the function from inside the instrumenter and use its name directly without slashes at the beginning. You can also print out the result of <code class="docutils literal notranslate"><span class="pre">ptera.refstring(f)</span></code> to get the string to use for the probe.</p>
</div>
</section>
</section>
</section>


           </div>
          </div>
          <footer>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2022, Mila IDT.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>